import"./Bzak7iHL.js";import{p as ut,a as Pe,s as k,u as $,g as n,h as f,i as ct,j as ft,k as Le,l as dt,t as Ce,b as o,d as mt,r as De,e as S,c as d,f as m,m as ee,o as te,q as Te,n as vt}from"./BwguTo01.js";import{d as ht,e as gt,o as _t,s as z,a as bt}from"./Bu45w55_.js";import{p as i,r as xt,i as E,b as We,c as he}from"./CMyoTnZX.js";import{d as ge,e as pt,i as wt}from"./qG3zDIF3.js";import{a as It,c as Ue,b as ke,u as Ot,s as Be}from"./DBhbQkAD.js";import{e as Mt,p as _e}from"./OhiPYEKz.js";import{T as At}from"./DlQxqtSW.js";import{M as St}from"./BhzZFL-E.js";import{L as Et,I as ne}from"./cRYY72xe.js";import{T as ae}from"./joHokXnS.js";import{A as yt}from"./CYjcg-An.js";let Pt=0;var Lt=(re,a,se)=>{a()||f(se,!0)},Ct=(re,a)=>{f(a,-1)},Dt=ft('<div><div role="combobox" tabindex="0"><!></div> <!></div>');function Kt(re,a){ut(a,!0);let se=i(a,"use",19,()=>[]),Fe=i(a,"class",3,""),G=i(a,"options",19,()=>[]),s=i(a,"value",15),Ne=i(a,"getOptionDisabled",3,()=>!1),g=i(a,"getOptionLabel",3,e=>e==null?"":`${e}`),u=i(a,"text",31,()=>Pe(g()(s()))),le=i(a,"disabled",3,!1),qe=i(a,"toggle",3,!1),B=i(a,"combobox",3,!1),Re=i(a,"clearOnBlur",19,()=>!B()),Ve=i(a,"selectOnExactMatch",3,!0),He=i(a,"showMenuWithNoInput",3,!0),je=i(a,"noMatchesActionDisabled",3,!0),Ke=i(a,"search",3,async e=>{const t=e.toLowerCase(),r=typeof G()=="function"?await G()():G()||[];if(t==="")return r;const ce=r.filter(H=>g()(H).toLowerCase().includes(t));return ce.sort((H,fe)=>{const de=g()(H).toLowerCase(),j=g()(fe).toLowerCase();return de.startsWith(t)&&!j.startsWith(t)?-1:j.startsWith(t)&&!de.startsWith(t)?1:0}),ce}),ze=i(a,"menu$class",3,""),Ge=i(a,"menu$anchor",3,!1),Je=i(a,"menu$anchorCorner",3,"BOTTOM_START"),F=xt(a,["$$slots","$$events","$$legacy","use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","children","loading","error","match","noMatches"]),N,w,y=k(0),ie=k(!1),q=k(!1),P,b=k(Pe([])),l=k(-1),M=k(void 0),be=F.menu$id??"SMUI-autocomplete-"+Pt+++"-menu";const xe=S(()=>n(q)&&(u()!==""||He())&&(n(y)>0||!B()&&!(n(b).length===1&&n(b)[0]===s())||B()&&!!n(b).length&&!(n(b).length===1&&n(b)[0]===s())));let pe=u();$(()=>{pe!==u()&&(s()!=null&&g()(s())!==u()&&Oe(s(),!1),n(q)&&(Ie(),pe=u()))});let oe=!1;$(()=>{G()&&!oe&&(oe=!0,Ie().then(()=>{oe=!1}))});let R=s();$(()=>{R!==s()?(u(g()(s())),R=s()):B()&&s()!==u()&&(s(u()),R=s())});let we;$(()=>{if(we!==n(l)){const e=J();n(l)===-1?f(M,void 0):(f(M,e[n(l)],!0),n(M)&&(n(M).activated=!0,Xe(n(M).element)||n(M).element.scrollIntoView({block:"end",inline:"nearest"}))),e.forEach((t,r)=>{r!==n(l)&&(t.activated=!1)}),P&&P.getOrderedList().forEach(t=>{t.tabindex=-1}),we=n(l)}}),ct("SMUI:list:mount",e=>{P||(P=e)});async function Ie(){n(q)&&!Ze()&&Ae(),f(y,n(y)+1),f(ie,!1);try{const e=await Ke()(u());if(e!==!1&&(f(b,e,!0),Ve())){const t=n(b).find(r=>g()(r)===u());t!=null&&g()(s())!==u()&&ue(t)}}catch{f(ie,!0)}f(y,n(y)-1)}function ue(e,t=!0){ge(V(),"SMUIAutocompleteSelected",e,{bubbles:!0,cancelable:!0}).defaultPrevented||(t&&u(g()(e)),s(e),t||(R=e))}function Oe(e,t=!0){ge(V(),"SMUIAutocompleteDeselected",e,{bubbles:!0,cancelable:!0}).defaultPrevented||(t&&u(""),s(void 0),t||(R=void 0))}function Qe(e){e===s()?Oe(e):ue(e)}function Xe(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function J(){return P?P.getOrderedList().filter(e=>!e.disabled):[]}function Ye(e){if(!(B()&&!n(b).length)){if(e.key==="ArrowDown")e.preventDefault(),n(l)===-1||n(l)===J().length-1?f(l,0):Te(l);else if(e.key==="ArrowUp")e.preventDefault(),n(l)===-1||n(l)===0?f(l,J().length-1):Te(l,-1);else if(e.key==="Enter"){e.preventDefault();const t=J();n(M)&&(t[n(l)]&&t[n(l)].action(e),f(l,-1))}}}async function Me(e){var t;if(!document.hasFocus()){_t(window,"focus",()=>{var r;(r=V())!=null&&r.contains(document.activeElement)||Me(e)},{once:!0});return}(t=e.currentTarget)!=null&&t.contains(e.relatedTarget)||(f(l,-1),f(q,!1),Re()&&s()==null&&u(""))}function Ze(){if(w)return document.activeElement===w.querySelector("input.mdc-text-field__input")}function Ae(){if(w){const e=w.querySelector("input.mdc-text-field__input");e&&e.focus()}}function $e(){if(w){const e=w.querySelector("input.mdc-text-field__input");e&&e.blur()}}function V(){return N}var A=Dt(),et=e=>{var t;le()||Me(e),(t=a.onfocusout)==null||t.call(a,e)};It(A,(e,t)=>({class:e,...t,onfocusout:et}),[()=>Ue({"smui-autocomplete":!0,[Fe()]:!0}),()=>Mt(F,["menu$","textfield$","list$"])]);var x=Le(A);x.__focusin=[Lt,le,q],x.__input=[Ct,l];var tt=Le(x);{var nt=e=>{var t=d(),r=m(t);z(r,()=>a.children??vt),o(e,t)},at=e=>{{let t=S(()=>_e(F,"textfield$"));At(e,he({get label(){return a.label},get disabled(){return le()}},()=>n(t),{get value(){return u()},set value(r){u(r)}}))}};E(tt,e=>{a.children?e(nt):e(at,!1)})}De(x),We(x,e=>w=e,()=>w);var rt=dt(x,2);{let e=S(()=>Ue({"smui-autocomplete__menu":!0,[ze()]:!0})),t=S(()=>_e(F,"menu$"));St(rt,he({get class(){return n(e)},get id(){return be},managed:!0,neverRestoreFocus:!0,get open(){return n(xe)},get anchor(){return Ge()},get anchorCorner(){return Je()}},()=>n(t),{get anchorElement(){return N},set anchorElement(r){N=r},children:(r,ce)=>{{let H=S(()=>_e(F,"list$"));Et(r,he(()=>n(H),{children:(fe,de)=>{var j=d(),st=m(j);{var lt=L=>{ne(L,{disabled:!0,children:(Q,Se)=>{var X=d(),me=m(X);{var I=p=>{var v=d(),c=m(v);z(c,()=>a.loading),o(p,v)},C=p=>{ae(p,{children:(v,c)=>{ee();var D=te("Loading...");o(v,D)},$$slots:{default:!0}})};E(me,p=>{a.loading?p(I):p(C,!1)})}o(Q,X)},$$slots:{default:!0}})},it=L=>{var Q=d(),Se=m(Q);{var X=I=>{ne(I,{disabled:!0,children:(C,p)=>{var v=d(),c=m(v);{var D=_=>{var O=d(),K=m(O);z(K,()=>a.error),o(_,O)},T=_=>{ae(_,{children:(O,K)=>{ee();var h=te("Error while fetching suggestions.");o(O,h)},$$slots:{default:!0}})};E(c,_=>{a.error?_(D):_(T,!1)})}o(C,v)},$$slots:{default:!0}})},me=I=>{var C=d(),p=m(C);pt(p,17,()=>n(b),wt,(v,c,D)=>{{let T=S(()=>Ne()(n(c))),_=S(()=>n(c)===s());ne(v,{get disabled(){return n(T)},get selected(){return n(_)},onmouseenter:()=>{f(l,D,!0)},onSMUIAction:()=>qe()?Qe(n(c)):ue(n(c)),children:(O,K)=>{var h=d(),W=m(h);{var Y=U=>{var Z=d(),Ee=m(Z);z(Ee,()=>a.match,()=>n(c)),o(U,Z)},ve=U=>{ae(U,{children:(Z,Ee)=>{ee();var ye=te();Ce(ot=>bt(ye,ot),[()=>g()(n(c))]),o(Z,ye)},$$slots:{default:!0}})};E(W,U=>{a.match?U(Y):U(ve,!1)})}o(O,h)},$$slots:{default:!0}})}},v=>{ne(v,{get disabled(){return je()},onSMUIAction:c=>ge(V(),"SMUIAutocompleteNoMatchesAction",c),children:(c,D)=>{var T=d(),_=m(T);{var O=h=>{var W=d(),Y=m(W);z(Y,()=>a.noMatches),o(h,W)},K=h=>{ae(h,{children:(W,Y)=>{ee();var ve=te("No matches found.");o(W,ve)},$$slots:{default:!0}})};E(_,h=>{a.noMatches?h(O):h(K,!1)})}o(c,T)},$$slots:{default:!0}})}),o(I,C)};E(Se,I=>{n(ie)?I(X):I(me,!1)},!0)}o(L,Q)};E(st,L=>{n(y)?L(lt):L(it,!1)})}o(fe,j)},$$slots:{default:!0}}))}},$$slots:{default:!0}}))}return De(A),We(A,e=>N=e,()=>N),ke(A,e=>{var t;return(t=yt)==null?void 0:t(e)}),ke(A,(e,t)=>{var r;return(r=Ot)==null?void 0:r(e,t)},se),Ce(()=>{Be(x,"aria-controls",be),Be(x,"aria-expanded",n(xe)?"true":"false")}),gt("keydown",x,Ye,!0),o(re,A),mt({focus:Ae,blur:$e,getElement:V})}ht(["focusin","input"]);export{Kt as A};
